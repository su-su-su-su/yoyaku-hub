- page_title = "#{yield(:title)} | #{default_title}"
- page_description = content_for?(:meta_description) ? yield(:meta_description) : default_description

- final_og_title = content_for?(:og_title) ? yield(:og_title) : page_title
- final_og_description = content_for?(:og_description) ? yield(:og_description) : page_description
- final_og_image = content_for?(:og_image) ? yield(:og_image) : default_image_url
- final_og_url = content_for?(:og_url) ? yield(:og_url) : request.original_url
- final_og_type = content_for?(:og_type) ? yield(:og_type) : default_og_type
- final_twitter_card = content_for?(:twitter_card) ? yield(:twitter_card) : default_twitter_card

title = page_title
meta name="description" content=page_description
meta charset="UTF-8"
meta name="viewport" content="width=device-width,initial-scale=1"
= csrf_meta_tags
= csp_meta_tag

meta property="og:title" content=final_og_title
meta property="og:description" content=final_og_description
meta property="og:url" content=final_og_url
meta property="og:image" content=final_og_image
meta property="og:type" content=final_og_type
meta property="og:site_name" content=site_name
meta name="twitter:card" content=final_twitter_card

= yield :head

link rel="manifest" href="/manifest.json"
link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"
link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"
link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"

link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=nest_thermostat_gen_3"
/ 一時的な診断用キャッシュバスティング（問題解決後に削除予定）
- cache_buster = Time.current.to_i
= stylesheet_link_tag "application", "data-turbo-track": "reload", cache: cache_buster
= stylesheet_link_tag "simple_calendar", "data-turbo-track": "reload", cache: cache_buster
= javascript_include_tag "application", "data-turbo-track": "reload"

/ Google Analytics
- if Rails.env.production? && ENV['GA_MEASUREMENT_ID'].present?
  script async="" src="https://www.googletagmanager.com/gtag/js?id=#{ENV['GA_MEASUREMENT_ID']}"
  javascript:
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '#{ENV['GA_MEASUREMENT_ID']}');
